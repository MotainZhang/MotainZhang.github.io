<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="MotainZhang" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="MotainZhang">
<meta property="og:url" content="https://motainzhang.com/page/3/index.html">
<meta property="og:site_name" content="MotainZhang">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MotainZhang">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://motainzhang.com/page/3/">





  <title>MotainZhang</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">MotainZhang</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            站点地图
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://motainzhang.com/2018/05/12/AOP的简单总结/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="MotainZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/27069108?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MotainZhang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/12/AOP的简单总结/" itemprop="url">AOP的简单总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-12T20:54:27+00:00">
                2018-05-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/" itemprop="url" rel="index">
                    <span itemprop="name">Java Web</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/Spring框架/" itemprop="url" rel="index">
                    <span itemprop="name">Spring框架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/12/AOP的简单总结/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/05/12/AOP的简单总结/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="AOP是什么"><a href="#AOP是什么" class="headerlink" title="AOP是什么"></a>AOP是什么</h2><p>AOP（Aspect-Oriented Programming）:面向切面编程</p>
<p>AOP实现了代码重用，以及业务逻辑与非业务逻辑（日志、安全）的分离。</p>
<h3 id="Aspect：-拥有日志、安全等功能的类"><a href="#Aspect：-拥有日志、安全等功能的类" class="headerlink" title="Aspect： 拥有日志、安全等功能的类"></a>Aspect： 拥有日志、安全等功能的类</h3><h3 id="JoinPoint：函数执行过程或者属性访问"><a href="#JoinPoint：函数执行过程或者属性访问" class="headerlink" title="JoinPoint：函数执行过程或者属性访问"></a>JoinPoint：函数执行过程或者属性访问</h3><h3 id="Pointcut：匹配-横切目标函数-的表达式"><a href="#Pointcut：匹配-横切目标函数-的表达式" class="headerlink" title="Pointcut：匹配 横切目标函数 的表达式"></a>Pointcut：匹配 横切目标函数 的表达式</h3><p>Pointcut表达式：<br><img src="https://github.com/Hunter1023/blogSource/raw/master/source/image/Pointcut%E8%A1%A8%E8%BE%BE%E5%BC%8F.png" alt="Pointcut表达式"></p>
<p>示例：</p>
<ul>
<li><p>匹配所有public函数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut</span>(<span class="string">"execution(public * *(..))"</span>)  <span class="comment">//对下一行的pointcut进行定义</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">publicMethod</span><span class="params">()</span></span>&#123;&#125; <span class="comment">//命名的Pointcut</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>匹配某个具体路径范围内的public函数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(<span class="keyword">public</span> * com.hunter.dao.*.*(..)) <span class="comment">//*.*(..) 路径下所有类的所有函数</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>所有以save开头的函数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut</span>(<span class="string">"execution(* save*(..))"</span>)</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">saveMethod</span><span class="params">()</span></span>&#123;&#125; <span class="comment">//命名的Pointcut</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>所有以save开头的public函数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">execution(publicMethod()&amp;&amp;saveMethod())</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Advice：在目标函数上要执行切面功能（在目标函数上标注）"><a href="#Advice：在目标函数上要执行切面功能（在目标函数上标注）" class="headerlink" title="Advice：在目标函数上要执行切面功能（在目标函数上标注）"></a>Advice：在目标函数上要执行切面功能（在目标函数上标注）</h3><p>Advice的类型：</p>
<ul>
<li>Before：函数执行之前</li>
<li>After returning：函数正常返回之后</li>
<li>After throwing：函数抛出异常之后</li>
<li>After finally：函数返回之后</li>
<li>Around：函数执行前后</li>
</ul>
<h2 id="Spring-AOP"><a href="#Spring-AOP" class="headerlink" title="Spring AOP"></a>Spring AOP</h2><p>Spring AOP是非完整的AOP实现（例如只支持 函数执行中的JoinPoint）。</p>
<p>Spring提供两种不同方式的AOP功能实现：</p>
<ul>
<li>通过@AspectJ注解</li>
<li>通过XML文件配置</li>
</ul>
<h3 id="通过-AspectJ注解"><a href="#通过-AspectJ注解" class="headerlink" title="通过@AspectJ注解"></a>通过@AspectJ注解</h3><ol>
<li>添加<code>aspectjweaver.jar</code>和<code>spring-aop</code>的依赖</li>
<li><p>在XML配置文件中添加如下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">        ...</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> /&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>定义Aspect<br>XML配置文件下：<br><code>&lt;bean id=&quot;唯一标识符&quot; class=&quot;对应的类&quot;&gt;&lt;/bean&gt;</code><br>对应的Java类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggingAspect</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在上述Java类中定义Pointcut(可忽略这一步，直接在Advice的定义中写出Pointcut表达式)<br>例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut</span>(<span class="string">"Pointcut表达式"</span>)    <span class="comment">//匹配目标函数</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> 表达式名称() &#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义Advice<br>例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Before</span>(<span class="string">"Pointcut表达式 或 表达式对应的名称"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doLog</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//具体的操作</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>Advice参数</strong><br>…</p>
<h3 id="通过XML文件配置"><a href="#通过XML文件配置" class="headerlink" title="通过XML文件配置"></a>通过XML文件配置</h3><p>…</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://motainzhang.com/2018/05/12/IoC容器/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="MotainZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/27069108?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MotainZhang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/12/IoC容器/" itemprop="url">IoC容器及其管理对象Bean</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-12T17:08:10+00:00">
                2018-05-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/" itemprop="url" rel="index">
                    <span itemprop="name">Java Web</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/Spring框架/" itemprop="url" rel="index">
                    <span itemprop="name">Spring框架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/12/IoC容器/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/05/12/IoC容器/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="IoC容器是什么"><a href="#IoC容器是什么" class="headerlink" title="IoC容器是什么"></a>IoC容器是什么</h2><p>IOC(Inversion of Control)即控制反转。</p>
<ul>
<li>控制什么<br>控制对象的依赖（Dependency Injection，依赖注入）。</li>
<li>谁来控制<br>对象的提供者来控制。</li>
</ul>
<p>通过IoC容器完成依赖注入的过程。IoC位于Spring框架比较核心的地位，向上层的AOP、外部框架以及数据访问的框架提供了基本的支持。</p>
<h3 id="Ioc容器类是ApplicationContext"><a href="#Ioc容器类是ApplicationContext" class="headerlink" title="Ioc容器类是ApplicationContext"></a>Ioc容器类是<code>ApplicationContext</code></h3><p>要使用<code>ApplicationContext</code>需要添加<code>spring-context</code>依赖。</p>
<h2 id="初始化IoC容器ApplicationContext"><a href="#初始化IoC容器ApplicationContext" class="headerlink" title="初始化IoC容器ApplicationContext"></a>初始化IoC容器<code>ApplicationContext</code></h2><p>在web.xml配置文件中添加以下内容即可<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:ApplicationContext配置文件路径.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>ApplicationContext配置文件路径.xml需要添加<code>xmlns:context</code>和相关schemaLocation：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">...</span></span></span><br><span class="line"><span class="tag">     <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">     ...</span></span></span><br><span class="line"><span class="tag"><span class="string">     http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">     http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>如果<strong>在非Web场景下</strong>，可以通过以下两种方式初始化IoC容器：</p>
<ol>
<li><code>ApplicationContext context = new ClassPathXmlApplicationContext(&quot;classPath下的XML配置文件&quot;)</code></li>
<li><code>ApplicationContext context = new FileSystemXmlApplicationContext(&quot;文件系统中的相对路径/绝对路径&quot;)</code></li>
</ol>
<h2 id="Bean"><a href="#Bean" class="headerlink" title="Bean"></a>Bean</h2><h3 id="Bean的定义"><a href="#Bean的定义" class="headerlink" title="Bean的定义"></a>Bean的定义</h3><p>Bean是<strong>被实例化、组装，并通过IoC容器管理</strong>的对象。</p>
<p>在<code>ApplicationContext</code>的XML配置文件中通过以下内容，即可定义bean：<br><code>&lt;bean id=&quot;唯一标识符&quot; class=&quot;对应的类&quot;&gt;&lt;/bean&gt;</code></p>
<h3 id="非Web场景下Bean的使用"><a href="#非Web场景下Bean的使用" class="headerlink" title="非Web场景下Bean的使用"></a>非Web场景下Bean的使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//初始化IoC容器</span></span><br><span class="line">    ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"classPath下的XML配置文件"</span>);</span><br><span class="line">    <span class="comment">//获取对象</span></span><br><span class="line">    类名 对象名 = context.getBean(BeanId, 对应类名.class);</span><br><span class="line">    <span class="comment">//使用对象</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Bean的作用域"><a href="#Bean的作用域" class="headerlink" title="Bean的作用域"></a>Bean的作用域</h3><p><img src="https://github.com/Hunter1023/blogSource/raw/master/source/image/Bean%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F.png" alt="Bean的作用域"></p>
<h4 id="singleton（单例，默认的作用域）"><a href="#singleton（单例，默认的作用域）" class="headerlink" title="singleton（单例，默认的作用域）"></a>singleton（单例，默认的作用域）</h4><p><code>&lt;bean id=&quot;唯一标识符&quot; class=&quot;对应的类&quot; scope=&quot;singleton&quot;&gt;&lt;/bean&gt;</code></p>
<h4 id="prototype（每次引用，都创建一个新实例）"><a href="#prototype（每次引用，都创建一个新实例）" class="headerlink" title="prototype（每次引用，都创建一个新实例）"></a>prototype（每次引用，都创建一个新实例）</h4><h3 id="Bean的生命周期回调功能"><a href="#Bean的生命周期回调功能" class="headerlink" title="Bean的生命周期回调功能"></a>Bean的生命周期回调功能</h3><h4 id="创建bean时做额外的事情（如申请资源）"><a href="#创建bean时做额外的事情（如申请资源）" class="headerlink" title="创建bean时做额外的事情（如申请资源）"></a>创建bean时做额外的事情（如申请资源）</h4><ul>
<li><p>方式一：实现Spring提供的<code>InitializingBean</code>接口完成回调</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">InitializingBean</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>方式二：<code>&lt;bean&gt;</code>中定义创建时调用的方法<br><code>&lt;bean id=&quot;唯一标识符&quot; class=&quot;对应的类&quot; init-method=&quot;该bean中的方法名称&quot;&gt;&lt;/bean&gt;</code></p>
</li>
</ul>
<h4 id="销毁bean时做额外的事情（如释放资源）"><a href="#销毁bean时做额外的事情（如释放资源）" class="headerlink" title="销毁bean时做额外的事情（如释放资源）"></a>销毁bean时做额外的事情（如释放资源）</h4><ul>
<li><p>方式一：实现Spring提供的<code>DisposableBean</code>接口完成回调</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DisposableBean</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>方式二：<code>&lt;bean&gt;</code>中定义创建时调用的方法<br><code>&lt;bean id=&quot;唯一标识符&quot; class=&quot;对应的类&quot; destroy-method=&quot;该bean中的方法名称&quot;&gt;&lt;/bean&gt;</code></p>
</li>
</ul>
<hr>
<h2 id="依赖注入"><a href="#依赖注入" class="headerlink" title="依赖注入"></a>依赖注入</h2><p>依赖注入的条件是：</p>
<ol>
<li>定义一个接口</li>
<li>实现该接口</li>
<li>以接口为基础注入</li>
</ol>
<h3 id="依赖注入的方式"><a href="#依赖注入的方式" class="headerlink" title="依赖注入的方式"></a>依赖注入的方式</h3><ul>
<li>基于构造函数注入（<strong>强依赖</strong>通过该方式注入）</li>
<li>基于Setter方法注入（<strong>可选依赖</strong>通过该方式注入）</li>
</ul>
<h3 id="依赖注入的类型"><a href="#依赖注入的类型" class="headerlink" title="依赖注入的类型"></a>依赖注入的类型</h3><ul>
<li>基本数据类型</li>
<li>集合</li>
<li>Bean</li>
<li>配置文件</li>
</ul>
<h3 id="自动装配"><a href="#自动装配" class="headerlink" title="自动装配"></a>自动装配</h3><p>　　自动装配就是让Spring自动满足bean依赖的一种方式，会在Spring的applicationContext中寻找匹配某个bean的需求的其他bean。如果有多个bean能满足依赖关系，Spring会抛出异常：表明没有指定哪个bean进行自动装配。</p>
<h4 id="XML方式"><a href="#XML方式" class="headerlink" title="XML方式"></a>XML方式</h4><p>代码独立，但是繁琐</p>
<h4 id="Annotation方式"><a href="#Annotation方式" class="headerlink" title="Annotation方式"></a>Annotation方式</h4><p>简洁，但是代码耦合</p>
<ul>
<li>@Value<br>properties注入</li>
<li>@Autowired(Spring提供) / @Resource(Java提供)<br>自动装配依赖的对象（如果后续项目想去除Spring IoC，建议使用@Resource）<br>如果没有匹配的bean，那么在applicationContext创建的时候，Spring会抛出异常，为了避免异常，可以将<code>@Autowired</code>的<code>required</code>属性设为<code>false</code>。例：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span>(required=<span class="keyword">false</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">CDPlayer</span><span class="params">(CompactDisc cd)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.cd = cd</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="注释Annotation"><a href="#注释Annotation" class="headerlink" title="注释Annotation"></a>注释Annotation</h2><p>简洁，但是代码耦合</p>
<p>如果想使用Annotation，需要在 IoC相关的XML配置文件中，添加如下内容：<br><code>&lt;context:component-scan base-package=&quot;包名，搜索相关annotation的范围&quot; /&gt;</code></p>
<p>以下内容，在Java类中添加：</p>
<ul>
<li>@Component<br>定义Bean</li>
<li>@Value<br>属性注入</li>
<li>@Autowired(Spring提供) / @Resource(Java提供)<br>自动装配依赖的对象（如果后续项目想去除Spring IoC，建议使用@Resource）</li>
<li>@PostConstruct&amp;@PreDestroy<br>生命周期回调</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://motainzhang.com/2018/05/11/事务的简单总结/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="MotainZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/27069108?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MotainZhang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/11/事务的简单总结/" itemprop="url">事务的简单总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-11T18:19:32+00:00">
                2018-05-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/" itemprop="url" rel="index">
                    <span itemprop="name">Java Web</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/事务/" itemprop="url" rel="index">
                    <span itemprop="name">事务</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/11/事务的简单总结/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/05/11/事务的简单总结/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="什么是事务"><a href="#什么是事务" class="headerlink" title="什么是事务"></a>什么是事务</h2><p>事务是并发控制的基本单元，指作为单个逻辑工作单元执行的一系列操作，而这些逻辑工作单元需要满足<strong>ACID</strong>特性。<br>所谓ACID:</p>
<ul>
<li>Automicity(原子性)：事务包含的所有操作，要么全部完成，要么全部不完成。</li>
<li>Consistency(一致性)：事务执行前后，数据必须处于一致的状态。</li>
<li>Isolation(隔离性)：一个事务内部的操作及使用的数据对并发的其他事务是隔离的。</li>
<li>Durability(持久性)：一个事务一旦提交成功，则事务对数据的改变永久生效。</li>
</ul>
<h2 id="JDBC进行事务管理"><a href="#JDBC进行事务管理" class="headerlink" title="JDBC进行事务管理"></a>JDBC进行事务管理</h2><p>Connection对象的相关方法：</p>
<ul>
<li><code>setAutoCommit()</code></li>
<li><code>commit()</code></li>
<li><code>rollback()</code></li>
</ul>
<p>…</p>
<h2 id="事务并发执行可能会导致的异常"><a href="#事务并发执行可能会导致的异常" class="headerlink" title="事务并发执行可能会导致的异常"></a>事务并发执行可能会导致的异常</h2><ul>
<li>脏读： 读取一个事务未提交的更新。</li>
<li>不可重复读：同一个事务中两次读取相同的记录，结果（值）不一样。</li>
<li>幻读：两次读取的结果包含的行记录数不一样。</li>
</ul>
<h2 id="事务的隔离级别"><a href="#事务的隔离级别" class="headerlink" title="事务的隔离级别"></a>事务的隔离级别</h2><ul>
<li>read uncommitted(读未提交)：允许出现脏读</li>
<li>read committed（读提交）：不允许脏读，允许不可重复读</li>
<li>repeatable read（重复读）：不允许不可重复读，允许幻读</li>
<li>serializable（串行化）：<strong>最高的事务隔离级别</strong>，不允许幻读，并发控制最严格，数据都串行执行。</li>
</ul>
<p><strong>MySQL默认的事务隔离级别是repeatable read（重复读）</strong>。</p>
<p>事务隔离级别越高，数据库性能越差，编程难度越低。</p>
<h3 id="查看-设置-隔离级别"><a href="#查看-设置-隔离级别" class="headerlink" title="查看/设置 隔离级别"></a>查看/设置 隔离级别</h3><p><code>Connection</code>对象的<code>getTransactionIsolation()</code>和<code>setTransactionIsolation()</code></p>
<hr>
<h2 id="死锁分析与解决"><a href="#死锁分析与解决" class="headerlink" title="死锁分析与解决"></a>死锁分析与解决</h2><p>…</p>
<h2 id="Spring进行事务管理"><a href="#Spring进行事务管理" class="headerlink" title="Spring进行事务管理"></a>Spring进行事务管理</h2><p>优点：</p>
<ul>
<li>统一的事务编程模型（不论底层的事务管理是JDBC还是Hibernate）</li>
<li>提供了编程式事务和声明式事务（通过AOP实现）两种方式</li>
</ul>
<p>Spring对事务管理抽象出了一个<code>PlatformTransactionManager</code>接口：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PlatformTransactionManager</span> </span>&#123;</span><br><span class="line">    <span class="function">TransactionStatus <span class="title">getTransaction</span><span class="params">(TransactionDefinition definition)</span> <span class="keyword">throws</span> TransactionException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">commit</span><span class="params">(TransactionStatus status)</span> <span class="keyword">throws</span> TransactionException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rollback</span><span class="params">(TransactionStatus status)</span> <span class="keyword">throws</span> TransactionException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>PlatformTransactionManager</code>接口有两个具体实现：</p>
<ul>
<li><code>DataSourceTransactionManager</code>(JDBC)</li>
<li><code>HibernateTransactionManager</code>(Hibernate)</li>
<li>底层实现不同，但是接口一致</li>
</ul>
<h3 id="TransactionDefinition-事务的定义"><a href="#TransactionDefinition-事务的定义" class="headerlink" title="TransactionDefinition 事务的定义"></a><code>TransactionDefinition</code> 事务的定义</h3><ul>
<li><code>getName()</code>：获取事务名称</li>
<li><code>getIsolationLevel()</code>：获取隔离级别</li>
<li><code>getPropagationBehavior()</code>：获取传播行为</li>
<li><code>getTimeout()</code>：获取超时时间</li>
<li><code>isReadOnly()</code>：事务是否只读(Hiberate会用到这个属性)</li>
</ul>
<h3 id="TransactionStatus-事务的状态"><a href="#TransactionStatus-事务的状态" class="headerlink" title="TransactionStatus 事务的状态"></a><code>TransactionStatus</code> 事务的状态</h3><ul>
<li><code>isNewTransaction()</code>：是否是新事务</li>
<li><code>hasSavepoint()</code>：是否有savepoint（诊断，NESTED）</li>
<li><code>isCompleted()</code>：是否已完成</li>
<li><code>isRollbackOnly()</code>：事务结果是否是rollback-only</li>
<li><code>setRollbackOnly()</code>：设置事务为rollback-only</li>
</ul>
<h3 id="隔离级别"><a href="#隔离级别" class="headerlink" title="隔离级别"></a>隔离级别</h3><ul>
<li>ISOLATION_READ_UNCOMMITTED：读未提交</li>
<li>ISOLATION_READ_COMMITTED：读提交</li>
<li>ISOLATION_REPEATABLE_READ：重复读</li>
<li>ISOLATION_SERIALIZABLE：串行化</li>
<li>ISOLATION_DEFAULT：默认（根据底层的事务管理是JDBC还是Hibernate而不同）</li>
</ul>
<h3 id="函数的传播行为"><a href="#函数的传播行为" class="headerlink" title="函数的传播行为"></a>函数的传播行为</h3><ul>
<li>PROPAGATION_MANDATORY<br>必须在一个事务中运行，不存在则抛异常（即运行该函数之前，已有事务）</li>
<li>PROPAGATION_NEVER<br>不应该在事务中运行，存在则抛异常（如果调用该函数是，已有事务，就抛出异常）</li>
<li>PROPAGATION_NOT_SUPPORTED<br>不应该在事务中运行，如果存在事务则将事务挂起</li>
<li>PROPAGATION_SUPPORTS<br>不需要事务，已有事务则在事务中执行</li>
<li>PROPAGATION_REQUIRED<br>必须在事务中执行，如果不存在事务，启动新事务。<br>内部事务会影响外部事务（内部事务如果抛出异常，外部事务也将无法提交）。</li>
<li>PROPAGATION_NESTED<br>必须在事务中执行，如果不存在，启动新事务。<br>事物之间相互不影响（savepoints）。</li>
<li>PROPAGATION_REQUIRES_NEW<br>必须在新事务中执行，已有事务则挂起当前事务。</li>
</ul>
<h3 id="声明式事务"><a href="#声明式事务" class="headerlink" title="声明式事务"></a>声明式事务</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">...</span></span></span><br><span class="line"><span class="tag">     <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">     ...</span></span></span><br><span class="line"><span class="tag"><span class="string">     http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">     http://www.springframework.org/schema/tx/spring-tx.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="定义事务管理器"><a href="#定义事务管理器" class="headerlink" title="定义事务管理器"></a>定义事务管理器</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="定义事务Advice"><a href="#定义事务Advice" class="headerlink" title="定义事务Advice"></a>定义事务<code>Advice</code></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"txManager"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"get*"</span> <span class="attr">read-only</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中，子标签<code>&lt;tx:method&gt;</code>有如下属性</p>
<ul>
<li>name：匹配的函数名称，支持*匹配</li>
<li>propagation：事务传播行为</li>
<li>isolation：事务隔离级别</li>
<li>timeout：超时</li>
<li>read-only：是否只读事务</li>
<li>rollback-for：触发回滚的异常，<code>,</code>分隔</li>
<li>no-rollback-for：不触发回滚的异常，<code>,</code>分隔</li>
</ul>
<h4 id="定义Pointcut"><a href="#定义Pointcut" class="headerlink" title="定义Pointcut"></a>定义<code>Pointcut</code></h4><p>在aop的配置标签中定义<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">expression</span>=<span class="string">"execute....."</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"上一行定义的id"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="除了XML声明，可以通过-Transactional声明事务"><a href="#除了XML声明，可以通过-Transactional声明事务" class="headerlink" title="除了XML声明，可以通过@Transactional声明事务"></a>除了XML声明，可以通过<code>@Transactional</code>声明事务</h4><p>XML配置文件中添加如下内容：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"txManager"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span>(propagation = Propagation.REQUIRED, rollbackFor = Exception.class)</span><br><span class="line"><span class="keyword">public</span> ....()&#123;...&#125;<span class="comment">//被声明为事务的具体函数</span></span><br></pre></td></tr></table></figure>
<p>在@Transactional后边括号中可以填写的内容：</p>
<ul>
<li>value：使用的TransactionManager</li>
<li>propagation：事务传播行为</li>
<li>isolation：事务隔离级别</li>
<li>timeout：超时</li>
<li>readOnly：是否只读事务</li>
<li>rollbackFor：触发回滚的异常类对象数组</li>
<li>rollbackForClassName：触发回滚的异常类名称数组</li>
<li>noRollbackFor：不触发回滚的异常类对象数组</li>
<li>noRollbackForClassName：不触发回滚的异常类名称数组</li>
</ul>
<h3 id="编程式事务"><a href="#编程式事务" class="headerlink" title="编程式事务"></a>编程式事务</h3><p>两种方式：</p>
<ul>
<li>TransactionTemplate</li>
<li>PlatformTransactionManager的实现</li>
</ul>
<h4 id="方式一：TransactionTemplate"><a href="#方式一：TransactionTemplate" class="headerlink" title="方式一：TransactionTemplate"></a>方式一：TransactionTemplate</h4><p>1.定义TransactionTemplate<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleService</span> <span class="keyword">implements</span> <span class="title">Service</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> TransactionTemplate transactionTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SimpleService</span><span class="params">(PlatformTransactionManager transactionManager)</span> </span>&#123;</span><br><span class="line">        transactionTemplate = <span class="keyword">new</span> TransactionTemplate(transactionManager);</span><br><span class="line">        transactionTemplate.setIsolationLevel(TransactionDefinition.ISOLATION_READ_UNCOMMITED);</span><br><span class="line">        transactionTemplate.setTimeout(<span class="number">30</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li>使用TransactionTemplate<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">someMethod</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> transactionTemplate.execute(<span class="keyword">new</span> TransactionCallback() &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Object <span class="title">doInTransaction</span><span class="params">(TransactionStatus status)</span> </span>&#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>…</p>
<h4 id="方式二：-PlatformTransactionManager的实现"><a href="#方式二：-PlatformTransactionManager的实现" class="headerlink" title="方式二： PlatformTransactionManager的实现"></a>方式二： PlatformTransactionManager的实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DefaultTransactionDefinition def = <span class="keyword">new</span> DefaultTransactionDefinition();</span><br><span class="line">def.setName(<span class="string">"someTxName"</span>);</span><br><span class="line">def.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRED);</span><br><span class="line"></span><br><span class="line">TransactionStatus status = txManager.getTransaction(def);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">//do some transaction logic</span></span><br><span class="line">&#125; <span class="keyword">catch</span>(MyException ex) &#123;</span><br><span class="line">    txManager.rollback(status);</span><br><span class="line">    <span class="keyword">throw</span> ex;</span><br><span class="line">&#125;</span><br><span class="line">txManager.commit(status);</span><br></pre></td></tr></table></figure>
<h2 id="MyBatis和Spring整合之后，如何使用事务管理"><a href="#MyBatis和Spring整合之后，如何使用事务管理" class="headerlink" title="MyBatis和Spring整合之后，如何使用事务管理"></a>MyBatis和Spring整合之后，如何使用事务管理</h2><p>　　代码中无需显式地指定事务的配置。底层的TransactionManager跟MyBatis的SQL操作无缝整合，无需额外的声明。可以直接使用事务管理的功能(同样支持声明式事务和编程式事务)。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://motainzhang.com/2018/05/11/数据库连接池的简单总结/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="MotainZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/27069108?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MotainZhang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/11/数据库连接池的简单总结/" itemprop="url">数据库连接池的简单总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-11T18:16:22+00:00">
                2018-05-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/" itemprop="url" rel="index">
                    <span itemprop="name">Java Web</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/数据库连接/" itemprop="url" rel="index">
                    <span itemprop="name">数据库连接</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/11/数据库连接池的简单总结/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/05/11/数据库连接池的简单总结/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="应用程序所在服务器-与-MySQL数据库-进行连接"><a href="#应用程序所在服务器-与-MySQL数据库-进行连接" class="headerlink" title="应用程序所在服务器 与 MySQL数据库 进行连接"></a>应用程序所在服务器 与 MySQL数据库 进行连接</h2><p><img src="https://github.com/Hunter1023/blogSource/raw/master/source/image/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%E6%97%B6%E9%97%B4%E5%BC%80%E9%94%80%E5%A4%A7.png" alt="建立连接时间开销大"></p>
<p>数据库的访问是多线程的，为了实现连接的复用，从创建数据库连接转变为租借连接，就需要<strong>连接池</strong>。<br>　　需要设置最大连接数限制，保证MySQL服务器资源没有被占用完。如果超出最大连接数，会抛出<code>too many connections</code>异常。但是对于应用程序来说：</p>
<ul>
<li>MySQL直接抛出异常对Java程序的处理不够友好，<strong>Java程序必须捕获这些异常并处理</strong>。</li>
<li>应该在数据库访问客户端时就实现限流，<strong>让数据库连接有序可控地被线程使用</strong>，多一种保护手段。</li>
</ul>
<p>因此，在Java程序中就要实现业务线程排队获取数据库连接。限制同时获得数据库连接的线程数，起到限流、保护后端数据库的作用。</p>
<h2 id="连接池"><a href="#连接池" class="headerlink" title="连接池"></a>连接池</h2><p>　　本质上是Jar包，介于Java应用程序和JDBC数据库物理连接之间，负责帮助应用程序管理JDBC连接。</p>
<p>　　通过连接池暴露的接口，业务程序可以获取数据库连接；使用完毕后，可以将数据库连接归还给连接池，供下一线程使用。</p>
<p>　　在连接池中，<strong>JDBC连接不足时，会自动创建连接；空闲连接过多时，会自动销毁连接</strong>。在多个线程同时获得数据库连接时，<strong>提供排队等待的功能</strong>，保证应用程序有序地获得数据库连接。</p>
<h2 id="DBCP连接池"><a href="#DBCP连接池" class="headerlink" title="DBCP连接池"></a>DBCP连接池</h2><p>DBCP是Tomcat所使用的连接池组件，包含三个Jar包：<code>commons-dbcp.jar</code>、<code>commons-pool.jar</code>、<code>commons-logging.jar</code>。</p>
<p>在Maven搭建的项目的pom.xml添加相关Jar包的依赖即可使用连接池提供的相关功能。</p>
<h3 id="创建连接池对象"><a href="#创建连接池对象" class="headerlink" title="创建连接池对象"></a>创建连接池对象</h3><p>创建<code>BasicDataSource</code>对象，并通过<code>setDriverClassName(DRIVER_NAME)</code>、<code>setURL(DB_URL)</code>、<code>setUsername(USER_NAME)</code>、<code>setPassWord(PASSWORD)</code>方法，配置具体连接的数据库信息。</p>
<h3 id="获取数据库连接"><a href="#获取数据库连接" class="headerlink" title="获取数据库连接"></a>获取数据库连接</h3><p>通过<code>BasicDataSource</code>对象的<code>getConnection()</code>方法，租借数据库连接，访问后端数据库。</p>
<h3 id="释放数据库连接"><a href="#释放数据库连接" class="headerlink" title="释放数据库连接"></a>释放数据库连接</h3><p>调用<code>Connection</code>的<code>close()</code>方法（DBCP的实现重写了close方法，将销毁连接的逻辑改成将连接归还连接池）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">dbPoolInit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	ds = <span class="keyword">new</span> BasicDataSource();<span class="comment">//创建连接池对象</span></span><br><span class="line">	ds.setUrl(DB_URL);</span><br><span class="line">	ds.setDriverClassName(DRIVER_NAME);</span><br><span class="line">	ds.setUsername(DB_USER_NAME);</span><br><span class="line">	ds.setPassword(DB_PASSWORD);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dbPoolTest</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">	Connection conn = <span class="keyword">null</span>;</span><br><span class="line">	PreparedStatement ptmt = <span class="keyword">null</span>;</span><br><span class="line">	ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		conn = ds.getConnection();</span><br><span class="line">		ptmt = conn.prepareStatement(<span class="string">"SELECT * FROM user WHERE name=?"</span>);<span class="comment">//参数格式化的SQL语句</span></span><br><span class="line">        ptmt.setString(<span class="number">1</span>, name);<span class="comment">//根据参数的顺序（从1开始，依次排序），设置参数。根据参数类型，还有setInt()等方法。</span></span><br><span class="line">		rs = stmt.executeQuery();</span><br><span class="line">		<span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">			System.out.println(rs.getString(<span class="string">"ProductName"</span>));<span class="comment">//获取数据库对应列的内容</span></span><br><span class="line">			System.out.println(rs.getInt(<span class="string">"Inventory"</span>));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (conn != <span class="keyword">null</span>)</span><br><span class="line">				conn.close();</span><br><span class="line">			<span class="keyword">if</span> (stmt != <span class="keyword">null</span>)</span><br><span class="line">				stmt.close();</span><br><span class="line">			<span class="keyword">if</span> (rs != <span class="keyword">null</span>)</span><br><span class="line">				rs.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">			<span class="comment">// 忽略</span></span><br><span class="line">		&#125;			</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h3 id="高级配置"><a href="#高级配置" class="headerlink" title="高级配置"></a>高级配置</h3><p><code>BasicDataSource</code>对象的以下方法：</p>
<ul>
<li><code>setInitialSize(int size)</code> 预置一定数量的数据库连接，提高第一次访问数据库的速度</li>
<li><code>setMaxTotal(int maxTotal)</code> 设置客户端最大连接数，起到限流保护数据库的作用</li>
<li><code>setMaxWaitMillis()</code> 设置最大等待时间，如果超过该时间，应用程序得到SQLException异常</li>
<li><code>setMaxIdle()</code> 设置空闲连接数，减少资源损耗</li>
<li><code>setMinIdle()</code> 保证连接池有足够的连接供租借</li>
</ul>
<p>为了避免频繁地创建销毁连接，建议<code>setMaxIdle()</code>和<code>setMinIdle()</code>设为相同值。</p>
<h4 id="DBCP定期检查"><a href="#DBCP定期检查" class="headerlink" title="DBCP定期检查"></a>DBCP定期检查</h4><p>MySQL会<strong>默认关闭空闲时间超过8小时的数据库连接</strong>。但是客户端不知道该情况，为了避免被关闭的连接被租借，从而导致异常。<strong>定期对连接池中连接的空闲时间进行检查，在服务端关闭连接之前，保证连接被销毁并补充新的连接，让用户租借的连接都是有效的</strong>。</p>
<p><code>BasicDataSource</code>对象的以下方法：</p>
<ul>
<li><code>setTestWhileIdle(True)</code> 开启连接的空闲时间检查</li>
<li><code>setMinEvicableIdleTimeMillis()</code> 销毁连接的最小空闲时间</li>
<li><code>setTimeBetweenEvictionRunsMillis()</code> 检查运行时的时间间隔</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://motainzhang.com/2018/05/10/请求转发与重定向/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="MotainZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/27069108?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MotainZhang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/10/请求转发与重定向/" itemprop="url">请求转发与重定向</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-10T20:42:40+00:00">
                2018-05-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/" itemprop="url" rel="index">
                    <span itemprop="name">Java Web</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/Servlet/" itemprop="url" rel="index">
                    <span itemprop="name">Servlet</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/10/请求转发与重定向/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/05/10/请求转发与重定向/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="请求转发"><a href="#请求转发" class="headerlink" title="请求转发"></a>请求转发</h2><p>请求转发就是将当前的<code>HttpServletRequest</code>和<code>HttpServletResponse</code>对象交给指定的web组件处理。对客户端来说，是<strong>一次请求，一次响应</strong>，浏览器的URL不变。</p>
<h3 id="请求转发的步骤"><a href="#请求转发的步骤" class="headerlink" title="请求转发的步骤"></a>请求转发的步骤</h3><ol>
<li>获取请求转发对象<br>即获取<code>RequestDispatcher</code>类的对象（由Servlet容器创建，封装由路径所标识的服务器资源）。<br>获取请求转发对象有两种方式：<ul>
<li>通过<code>HTTPServletRequest</code>对象获取:<br><code>RequestDispatcher rd = request.getRequestDispatcher(&quot;绝对路径/相对路径&quot;);</code></li>
<li>通过<code>ServleContext</code>对象获取:<br><code>RequestDispatcher rd = this.getServletContext().getNamedDispatcher(&quot;servlet-name&quot;);</code><br>或者<code>RequestDispatcher rd = this.getServletContext().getRequestDispatcher(&quot;绝对路径&quot;);</code></li>
</ul>
</li>
<li>调用转发对象的<code>forward(HttpServletRequest req, HttpServletResponse resp)</code>方法</li>
</ol>
<hr>
<h2 id="请求重定向"><a href="#请求重定向" class="headerlink" title="请求重定向"></a>请求重定向</h2><p>请求重定向就是通过<code>HttpServletResponse</code>对象<strong>发送给客户端一个新的URL地址，让其重新请求</strong>。对客户端来说，是<strong>两次请求，两次响应</strong>。</p>
<p>请求重定向的方法：<code>resp.sendRedirect(&quot;绝对路径/相对路径&quot;);</code></p>
<h2 id="Spring-MVC的Controller如何处理请求转发与重定向"><a href="#Spring-MVC的Controller如何处理请求转发与重定向" class="headerlink" title="Spring MVC的Controller如何处理请求转发与重定向"></a><a href="/2018/06/14/Spring MVC的Controller的几种常用返回类型（含请求转发、重定向）">Spring MVC的Controller如何处理请求转发与重定向</a></h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://motainzhang.com/2018/05/10/Cookie和Session/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="MotainZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/27069108?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MotainZhang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/10/Cookie和Session/" itemprop="url">Cookie和Session</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-10T15:47:04+00:00">
                2018-05-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/" itemprop="url" rel="index">
                    <span itemprop="name">Java Web</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/Servlet/" itemprop="url" rel="index">
                    <span itemprop="name">Servlet</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/10/Cookie和Session/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/05/10/Cookie和Session/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Cookie和HttpSession是什么"><a href="#Cookie和HttpSession是什么" class="headerlink" title="Cookie和HttpSession是什么"></a>Cookie和HttpSession是什么</h2><p>Cookie和HttpSession是两种会话数据的保存方式。两者具体的类封装在<code>javax.servlet.http</code>中，<code>servlet-api.jar</code>是需要额外加载的Jar包,Tomcat安装目录下含有该Jar包。</p>
<h2 id="Cookie的特性及方法"><a href="#Cookie的特性及方法" class="headerlink" title="Cookie的特性及方法"></a>Cookie的特性及方法</h2><ol>
<li>存储位置<br>存储在客户端</li>
<li>生命周期<br>默认会话结束后消失（存于内存中）；通过<code>setMaxAge(int time)</code>可以设置cookie的有效期（单位是s，存到硬盘）。</li>
<li>缺陷<br><strong>大小和数量限制：</strong>一般每个站点大约能保存20个cookie，大小限制在4k以内。<br><strong>数据安全性问题：</strong>http请求中的cookie是明文传递的。</li>
<li>相关方法  </li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">String userName = request.getParameter(<span class="string">"userName"</span>);</span><br><span class="line">Cookie userNameCookie = <span class="keyword">new</span> Cookie(<span class="string">"userName"</span>, userName);</span><br><span class="line">userNameCookie.setMaxAge(<span class="number">10</span>*<span class="number">60</span>)</span><br><span class="line">response.addCookie(userNameCookie);</span><br><span class="line"></span><br><span class="line">Cookie[] cookies = request.getCookies();</span><br><span class="line"><span class="keyword">for</span>(Cookie cookie : cookies) &#123;</span><br><span class="line">    String name = cookie.getName();</span><br><span class="line">    String value = cookie.getValue();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="HttpSession的特性"><a href="#HttpSession的特性" class="headerlink" title="HttpSession的特性"></a>HttpSession的特性</h2><ol>
<li>存储位置<br>保存于服务端。</li>
<li><p>生命周期</p>
<ul>
<li><p><strong>有效期30min</strong>，可以通过两种方式设置有效期：</p>
<ul>
<li><code>setMaxInactiveTnterval(int time)</code>，单位是s</li>
<li>通过部署描述符配置session有效期,单位是min<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>time<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>还可以通过HttpSession的<code>invalidate()</code>方法，<strong>手动使session失效</strong>。</p>
</li>
</ul>
</li>
<li><p>相关方法</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">String password = request.getParameter(<span class="string">"password"</span>);</span><br><span class="line">HttpSession session = request.getSession();</span><br><span class="line"></span><br><span class="line">String name = (String)session.getAttribute(<span class="string">"userName"</span>);</span><br><span class="line">session.setMaxInactiveTnterval(<span class="number">30</span>*<span class="number">60</span>);</span><br><span class="line"></span><br><span class="line">session.setAttribute(<span class="string">"password"</span>, password);</span><br><span class="line"></span><br><span class="line">session.removeAttribute(<span class="string">"password"</span>);</span><br><span class="line"></span><br><span class="line">session.invalidate();</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://motainzhang.com/2018/05/08/使用IDEA-Maven进行Java-Web开发的操作流程/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="MotainZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/27069108?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MotainZhang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/08/使用IDEA-Maven进行Java-Web开发的操作流程/" itemprop="url">使用IDEA+Maven进行Java Web开发的操作流程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-08T00:44:17+00:00">
                2018-05-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/" itemprop="url" rel="index">
                    <span itemprop="name">Java Web</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/IDE/" itemprop="url" rel="index">
                    <span itemprop="name">IDE</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/08/使用IDEA-Maven进行Java-Web开发的操作流程/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/05/08/使用IDEA-Maven进行Java-Web开发的操作流程/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="File-→-New-→-Project"><a href="#File-→-New-→-Project" class="headerlink" title="File → New → Project..."></a><code>File</code> → <code>New</code> → <code>Project...</code></h2><p><img src="https://github.com/Hunter1023/blogSource/raw/master/source/image/newProject_1.png" alt="newProject_1">  </p>
<p><img src="https://github.com/Hunter1023/blogSource/raw/master/source/image/newProject_2.png" alt="newProject_2"></p>
<p>接着直接next → 自定义项目名称和项目存放位置 → finish</p>
<p>创建好基本框架后，IDEA会提示<code>maven project need to be imported</code>。选择<code>Enable Auto-Import</code>（之后对pom.xml添加新的依赖，IDEA会自动下载相关依赖包）。</p>
<hr>
<h2 id="创建源代码目录"><a href="#创建源代码目录" class="headerlink" title="创建源代码目录"></a>创建源代码目录</h2><p>　　maven web项目默认没有java源代码目录，需要手动创建，并设置其为源代码目录：<br>右键main目录-&gt; <code>New</code>-&gt;<code>Directory</code>-&gt;输入java-&gt;右键java-&gt;<code>Mark Directory as</code>-&gt; <code>Sources Root</code><br>这样就创建了存放java源文件的目录。</p>
<hr>
<h2 id="创建resources目录"><a href="#创建resources目录" class="headerlink" title="创建resources目录"></a>创建<code>resources</code>目录</h2><p>在项目的 src → main目录下创建<code>resources</code>目录，并<code>Mark Directory as</code> → <code>Resources Root</code></p>
<hr>
<h2 id="配置Maven的Tomcat插件"><a href="#配置Maven的Tomcat插件" class="headerlink" title="配置Maven的Tomcat插件"></a>配置Maven的Tomcat插件</h2><h3 id="eclipse配置Maven的Tomcat插件"><a href="#eclipse配置Maven的Tomcat插件" class="headerlink" title="eclipse配置Maven的Tomcat插件"></a>eclipse配置Maven的Tomcat插件</h3><ul>
<li><p>先安装maven插件：导航栏 help → Install New Software… → 搜索 m2eclipse,选中并下载安装即可</p>
</li>
<li><p>右键项目 -&gt; Run As -&gt; <code>Maven build</code>(已有配置，直接运行)/<code>Maven build...</code>（新建配置）<br><img src="https://github.com/Hunter1023/blogSource/raw/master/source/image/Run%20Configurations.png" alt="eclipse配置maven的tomcat插件"></p>
</li>
<li><p>填写项目名称<code>Name</code>、项目所在目录<code>Base directory</code>、<code>Goals</code>栏填写<strong>tomcat7:run</strong>；<strong>勾选Skip Tests（加快启动速度）</strong>，Apply即可。<br><img src="https://github.com/Hunter1023/blogSource/raw/master/source/image/%E9%85%8D%E7%BD%AEtomcat7%E6%8F%92%E4%BB%B6.png" alt="具体配置步骤"></p>
</li>
</ul>
<h3 id="IDEA配置Maven的Tomcat插件"><a href="#IDEA配置Maven的Tomcat插件" class="headerlink" title="IDEA配置Maven的Tomcat插件"></a>IDEA配置Maven的Tomcat插件</h3><ul>
<li><p>界面右上角<code>select Run/Debug Configuration</code>下拉菜单 -&gt; <code>edit configurations...</code><br><img src="https://github.com/Hunter1023/blogSource/raw/master/source/image/Edit%20Configutations.png" alt=""></p>
</li>
<li><p>点击 弹出窗口的左上角<strong>+号</strong> -&gt; Maven<br><img src="https://github.com/Hunter1023/blogSource/raw/master/source/image/IDEA%E9%85%8D%E7%BD%AEMaven%E7%9A%84tomcat.png" alt=""></p>
</li>
<li><p>填写项目名称<code>Name</code>、项目所在目录<code>Working directory</code>、<code>Command line</code>栏填写<strong>tomcat7:run</strong>，Apply即可。<br><img src="https://github.com/Hunter1023/blogSource/raw/master/source/image/IDEA%E9%85%8D%E7%BD%AETomcat%E6%8F%92%E4%BB%B6.png" alt=""></p>
</li>
<li><p>IDEA中的<code>skip tests</code>在界面右侧设置 -&gt; Maven Projects -&gt; 单击闪电标志即可<br><img src="https://github.com/Hunter1023/blogSource/raw/master/source/image/skip%20test.png" alt=""></p>
</li>
</ul>
<hr>
<h2 id="pom-xml中添加tomcat插件的相关配置"><a href="#pom-xml中添加tomcat插件的相关配置" class="headerlink" title="pom.xml中添加tomcat插件的相关配置"></a>pom.xml中添加tomcat插件的相关配置</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">uriEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">uriEncoding</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>项目名称<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">server</span>&gt;</span>tomcat<span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="pom-xml中添加compiler插件的相关配置"><a href="#pom-xml中添加compiler插件的相关配置" class="headerlink" title="pom.xml中添加compiler插件的相关配置"></a>pom.xml中添加compiler插件的相关配置</h2><ul>
<li>为什么需要配置？<br>两个原因：<ul>
<li>如果不配置，就会用maven-compiler-plugin默认的jdk版本来进行处理，容易出现版本不匹配的问题。</li>
<li>一般而言，target与source需要保持一致。但是，有时候为了让JavaWeb程序能在其他环境中运行，会<strong>将source和target设为要运行的环境中的jdk版本</strong>。（项目源代码中不能使用target的jdk不支持的语法，否则编译无法通过)</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://motainzhang.com/2018/05/07/Servlet的简单总结/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="MotainZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/27069108?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MotainZhang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/07/Servlet的简单总结/" itemprop="url">Servlet的简单总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-07T21:59:33+00:00">
                2018-05-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/" itemprop="url" rel="index">
                    <span itemprop="name">Java Web</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java-Web/Servlet/" itemprop="url" rel="index">
                    <span itemprop="name">Servlet</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/07/Servlet的简单总结/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/05/07/Servlet的简单总结/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Servlet是什么"><a href="#Servlet是什么" class="headerlink" title="Servlet是什么"></a>Servlet是什么</h2><p>Servlet（Server + Applet），一个Servlet就是一个Java类，并<strong>提供 基于请求-响应模式 的Web服务</strong>。</p>
<p>要使用servlet需要添加<code>javax.servlet-api</code>Jar包。</p>
<hr>
<h2 id="Servlet的处理流程"><a href="#Servlet的处理流程" class="headerlink" title="Servlet的处理流程"></a>Servlet的处理流程</h2><ol>
<li>接收客户端的HTTP请求路径及请求内容</li>
<li><p>根据web.xml（属于web应用程序的一部分，部署描述符），找到请求路径对应的Servlet</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet名称（最好与类名相同）<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>类路径<span class="tag">&lt;/<span class="name">servlet-calss</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>与<span class="tag">&lt;<span class="name">servlet</span>&gt;</span>元素中的该元素内容相同<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>映射路径<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将请求转发给Servlet对应的service方法（会传递HttpServletRequest对象和HttpServletResponse对象作为方法参数）</p>
</li>
<li>service方法根据请求是 get/post/… 转发给 doGet/doPost方法处理</li>
<li>通过HttpResponse对象，将响应返回给客户端</li>
</ol>
<hr>
<h2 id="Servlet生命周期"><a href="#Servlet生命周期" class="headerlink" title="Servlet生命周期"></a>Servlet生命周期</h2><p>init → service（doGet、doPost…） → destroy</p>
<hr>
<h2 id="管理Servlet的配置信息"><a href="#管理Servlet的配置信息" class="headerlink" title="管理Servlet的配置信息"></a>管理Servlet的配置信息</h2><h3 id="通过ServletConfig对象"><a href="#通过ServletConfig对象" class="headerlink" title="通过ServletConfig对象"></a>通过<code>ServletConfig</code>对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">&lt;servlet&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;param-name&gt;参数名1&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;参数值1&lt;/param-value&gt;</span><br><span class="line">    &lt;/init-param&gt;</span><br><span class="line">    ...</span><br><span class="line">    &lt;servlet-name&gt;servlet名称（最好与类名相同）&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;类名&lt;/servlet-calss&gt;</span><br><span class="line">&lt;/servlet&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;与&lt;servlet&gt;元素中的该元素内容相同&lt;/servlet-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;映射路径&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>
<p><strong>每个Servlet支持设置多个<code>&lt;init-param&gt;</code></strong>,Servlet初始化过程中，<code>&lt;init-param&gt;</code>参数将被封装到<code>ServletConfig</code>对象中。在Servlet中，通过调用ServletConfig对象，就可以利用配置信息：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ServletConfig config = <span class="keyword">this</span>.getServletConfig();</span><br><span class="line">String value1 = config.getParameter(<span class="string">"参数名1"</span>);<span class="comment">//根据查找参数名，获取参数值</span></span><br></pre></td></tr></table></figure></p>
<h3 id="通过ServletContext共享Servlet的配置信息"><a href="#通过ServletContext共享Servlet的配置信息" class="headerlink" title="通过ServletContext共享Servlet的配置信息"></a>通过<code>ServletContext</code>共享Servlet的配置信息</h3><p>Servlet容器在启动时，会为每个Web应用创建一个对应的<code>ServletContext</code>对象（代表当前的Web应用）。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>参数名1<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>参数值1<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p><code>&lt;context-param&gt;</code>是在各个具体的<code>&lt;servlet&gt;</code>元素之外的，同样可以设置多个<code>&lt;context-param&gt;</code>。在任意具体的Servlet中，通过调用<code>ServletContext</code>对象，就可以利用配置信息：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ServletContext context = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">String globalValue1 = context.getInitParameter(<span class="string">"参数名"</span>);</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="通过ServletContext的属性（attribute）实现不同Servlet之间的通信"><a href="#通过ServletContext的属性（attribute）实现不同Servlet之间的通信" class="headerlink" title="通过ServletContext的属性（attribute）实现不同Servlet之间的通信"></a>通过<code>ServletContext</code>的属性（attribute）实现不同Servlet之间的通信</h2><p>实现不知道，无法预先配置的信息，应该如何共享？（比如将购物车中的商品共享给结算页面）</p>
<p>在具体的Serlvet中，通过<code>ServletContext</code>对象的属性（attribute）设置希望共享的信息：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ServletContext context = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">context.setAttribute(<span class="string">"属性名"</span>,<span class="string">"属性值"</span>);</span><br><span class="line">String attribute = (String) context.getAttribute(<span class="string">"属性名"</span>);<span class="comment">//getAttribute的返回值是Object类型</span></span><br><span class="line">context.removeAttribute(<span class="string">"属性名"</span>);</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="读取外部资源配置文件信息"><a href="#读取外部资源配置文件信息" class="headerlink" title="读取外部资源配置文件信息"></a>读取外部资源配置文件信息</h2><p>通过<code>ServletContext</code>的方法读取</p>
<h3 id="getResource-“外部资源配置文件的路径”"><a href="#getResource-“外部资源配置文件的路径”" class="headerlink" title="getResource(“外部资源配置文件的路径”)"></a>getResource(“外部资源配置文件的路径”)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ServletContext context = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">URL url = context.getResource(<span class="string">"外部资源配置文件的相对路径"</span>);</span><br><span class="line">InputStream in = url.openStream();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">利用编写的一个工具类，读取属性值</span></span><br><span class="line"><span class="comment">String property1 = GeneralUtil.getProperty("属性名", in);</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="getResourceAsStream-“外部资源配置文件的路径”"><a href="#getResourceAsStream-“外部资源配置文件的路径”" class="headerlink" title="getResourceAsStream(“外部资源配置文件的路径”)"></a>getResourceAsStream(“外部资源配置文件的路径”)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ServletContext context = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">InputStream in = context.getResourceAsStream(<span class="string">"外部资源配置文件的相对路径"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">利用编写的一个工具类，读取属性值</span></span><br><span class="line"><span class="comment">...</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="getRealPath-“外部资源配置文件的相对路径”"><a href="#getRealPath-“外部资源配置文件的相对路径”" class="headerlink" title="getRealPath(“外部资源配置文件的相对路径”)"></a>getRealPath(“外部资源配置文件的相对路径”)</h3><p>获取外部资源配置文件的绝对路径<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String realPath = context.getRealPath(<span class="string">"外部资源配置文件的相对路径"</span>);</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="HttpServletRequest和HttpServletResponse的常用方法"><a href="#HttpServletRequest和HttpServletResponse的常用方法" class="headerlink" title="HttpServletRequest和HttpServletResponse的常用方法"></a><code>HttpServletRequest</code>和<code>HttpServletResponse</code>的常用方法</h2><h3 id="HttpServletRequest类中常用方法"><a href="#HttpServletRequest类中常用方法" class="headerlink" title="HttpServletRequest类中常用方法"></a>HttpServletRequest类中常用方法</h3><ul>
<li><p>getMethod() 返回所要求的HTTP方法，比如GET POST 或者PUT等；</p>
</li>
<li><p>getHeader(String name) 返回指明的HTTP头部信息；</p>
</li>
<li><p>getCookies() 返回客户端随请求一起发送的所有Cookies的一个数组；</p>
</li>
<li><p>getSession() 返回与本请求相关的当前Session；</p>
</li>
</ul>
<p>　　其它还有getRequestURL() getRemoteUser() 等。</p>
<h3 id="HttpServletResponse类中常用方法"><a href="#HttpServletResponse类中常用方法" class="headerlink" title="HttpServletResponse类中常用方法"></a>HttpServletResponse类中常用方法</h3><ul>
<li><p>addCookie(Cookie cookie) 在回应当中加入指定的cookie；</p>
</li>
<li><p>getHeader(String name) 用给出的name变量获得回应头不的值；</p>
</li>
<li><p>getStatus() 获得本回复的当前状态码；</p>
</li>
</ul>
<p>　　其它还有一些get或者add开头的方法。 </p>
<hr>
<h2 id="Cookie和Session"><a href="#Cookie和Session" class="headerlink" title="Cookie和Session"></a><a href="/2018/05/10/Cookie和Session">Cookie和Session</a></h2><hr>
<h2 id="请求转发与重定向"><a href="#请求转发与重定向" class="headerlink" title="请求转发与重定向"></a><a href="/2018/05/10/请求转发与重定向">请求转发与重定向</a></h2><h2 id="SpringMVC框架用DispatcherServlet提供web服务"><a href="#SpringMVC框架用DispatcherServlet提供web服务" class="headerlink" title="SpringMVC框架用DispatcherServlet提供web服务"></a><a href="/2018/05/14/Spring-MVC的简单总结">SpringMVC框架用DispatcherServlet提供web服务</a></h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://motainzhang.com/2018/05/03/迭代器/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="MotainZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/27069108?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MotainZhang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/03/迭代器/" itemprop="url">迭代器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-03T16:57:47+00:00">
                2018-05-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/03/迭代器/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/05/03/迭代器/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>迭代器是一个实现了<code>hasNext()</code>和<code>next()</code>方法的类的对象，由以下接口定义：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterator</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">Item <span class="title">next</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://motainzhang.com/2018/04/26/读书笔记/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="MotainZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/27069108?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MotainZhang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/26/读书笔记/" itemprop="url">读书笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-26T16:07:20+00:00">
                2018-04-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/读书笔记/" itemprop="url" rel="index">
                    <span itemprop="name">读书笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/04/26/读书笔记/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/04/26/读书笔记/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><a href="https://hunter1023.gitbooks.io/html5guide/content/" target="_blank" rel="noopener">HTML5权威指南</a></li>
<li><a href="https://hunter1023.gitbooks.io/data_structure/content/" target="_blank" rel="noopener">数据结构</a></li>
<li><a href="https://hunter1023.gitbooks.io/core_java_volume/content/" target="_blank" rel="noopener">Java核心技术</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://avatars1.githubusercontent.com/u/27069108?s=460&v=4" alt="MotainZhang">
            
              <p class="site-author-name" itemprop="name">MotainZhang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">52</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">29</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">62</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/MotainZhang" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="sw20026@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://plus.google.com/jszhang" target="_blank" title="Google">
                      
                        <i class="fa fa-fw fa-google"></i>Google</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.v2ex.com/" title="V2EX" target="_blank">V2EX</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://e.xitu.io/" title="JueJin" target="_blank">JueJin</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.alloyteam.com/nav/" title="Web前端导航" target="_blank">Web前端导航</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.chuangzaoshi.com/code" title="Web创造狮导航" target="_blank">Web创造狮导航</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">MotainZhang</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'VITR9FskbbXnDcpwBdyTT15i-gzGzoHsz',
        appKey: 'acgrONeHircp8V2jHpsppXdm',
        placeholder: '说点什么吧',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">

  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>

  <script>
    
      pbOptions = {};
      
          pbOptions.iconStyle = "box";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
  </script>

  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":100,"height":200},"mobile":{"show":true},"react":{"opacityDefault":1,"opacityOnHover":0.2},"log":false});</script></body>
</html>
